"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[408],{5408:function(e,i,n){n.r(i),n.d(i,{default:function(){return k}});var a,t=n(1413),r=n(4165),l=n(5861),o=n(885),s=n(2791),c=n(3360),d=n(3027),m=n(4569),u=n.n(m),p=n(2982),g=n(4942),f={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},v=new Uint8Array(16);function h(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(v)}for(var x=[],j=0;j<256;++j)x.push((j+256).toString(16).slice(1));function Z(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return x[e[i+0]]+x[e[i+1]]+x[e[i+2]]+x[e[i+3]]+"-"+x[e[i+4]]+x[e[i+5]]+"-"+x[e[i+6]]+x[e[i+7]]+"-"+x[e[i+8]]+x[e[i+9]]+"-"+x[e[i+10]]+x[e[i+11]]+x[e[i+12]]+x[e[i+13]]+x[e[i+14]]+x[e[i+15]]}var y=function(e,i,n){if(f.randomUUID&&!i&&!e)return f.randomUUID();var a=(e=e||{}).random||(e.rng||h)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,i){n=n||0;for(var t=0;t<16;++t)i[n+t]=a[t];return i}return Z(a)},C=function(e){var i=(0,s.useState)(e),n=(0,o.Z)(i,2),a=n[0],r=n[1],l=(0,s.useState)(!1),c=(0,o.Z)(l,2),d=c[0],m=c[1];return{imageFile:a,setImageFile:r,isFileLoading:d,onFileChange:function(e,i){var n=i.name,l=i.type,o=e.target.value,s=e.target.files[0],c=s.size/1024/1024;if(m(!0),/(\.jpg|\.jpeg|\.png)$/i.exec(o))if(c>.5)alert("File size exceeded 500kb, consider optimizing your image","error"),m(!1);else if("multiple"===l)Array.from(e.target.files).forEach((function(e){var i=new FileReader;i.addEventListener("load",(function(i){r((function(a){return(0,t.Z)((0,t.Z)({},a),{},(0,g.Z)({},n,[].concat((0,p.Z)(a[n]),[{file:e,url:i.target.result,id:y()}])))}))})),i.readAsDataURL(e)})),m(!1);else{var d=new FileReader;d.addEventListener("load",(function(e){r((0,t.Z)((0,t.Z)({},a),{},(0,g.Z)({},n,{file:s,url:e.target.result}))),m(!1)})),d.readAsDataURL(s)}else alert("File type must be JPEG or PNG","error"),m(!1)},removeImage:function(e){var i=e.id,n=e.name,l=a[n].filter((function(e){return e.id!==i}));r((0,t.Z)((0,t.Z)({},a),{},(0,g.Z)({},n,l)))}}},F=n(7144),_=(n(3508),n(184)),w=function(e){var i=e.src,n=e.alt,a={},t=(0,s.useState)(a[i]),r=(0,o.Z)(t,2),l=r[0],c=r[1];return(0,_.jsxs)(_.Fragment,{children:[!l&&(0,_.jsx)(F.Z,{style:{position:"absolute",top:0,bottom:0,right:0,left:0,margin:"auto"}}),(0,_.jsx)("img",{alt:n||"",className:"collection-images",onLoad:function(){a[i]=!0,c(!0)},src:i})]})};w.defaultProps={className:"image-loader"};var N=w;function b(e,i){return new Promise((function(n,a){var t=new FileReader;t.readAsDataURL(e,i),t.onload=function(){n(t.result)},t.onerror=function(e){a(e)}}))}var U=n(3504),k=function(e){var i,n,a=e.product,m=(0,s.useState)(a),p=(0,o.Z)(m,2),g=p[0],f=p[1],v=C({imageCollection:(null===g||void 0===g?void 0:g.imageCollection)||[]}),h=v.imageFile,x=v.isFileLoading,j=v.onFileChange,Z=v.removeImage,y=(0,s.useState)(""),F=(0,o.Z)(y,2),w=F[0],k=F[1],D=w||(null===g||void 0===g?void 0:g.fname),I={id:null===g||void 0===g?void 0:g._id,name:D,image:null===g||void 0===g?void 0:g.image,image2:null===g||void 0===g?void 0:g.image2,imgpath:null===g||void 0===g?void 0:g.imgpath,date:null===g||void 0===g?void 0:g.date,imageCollection:h},L=(0,s.useState)(),S=(0,o.Z)(L,2),R=S[0],E=S[1],G=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(i){var n,a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),(n=new FormData).append("photo",R),n.append("id",g._id),n.append("name",D),n.append("image",g.image),n.append("image2",g.image2),n.append("imgpath",g.imgpath),n.append("date",g.date),null===h||void 0===h||h.imageCollection.forEach((function(e,i){var a=e.id,t=e.url;n.append("imageCollection[".concat(i,"][id]"),a),n.append("imageCollection[".concat(i,"][url]"),t)})),a={headers:{"Content-Type":"application/json"}},console.log("line:300",I),e.next=14,u().post("/editfiles",n,a);case 14:401!==(t=e.sent).data.status&&t.data?(console.log("!success!",t),window.location.href="/files"):console.log("errror");case 16:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),A=(0,s.useState)({myFile:""}),P=(0,o.Z)(A,2),V=P[0],z=P[1],B=(0,s.useState)(),J=(0,o.Z)(B,2),O=J[0],T=J[1],$=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(i){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.target.files[0],e.next=3,b(n);case 3:a=e.sent,z((0,t.Z)((0,t.Z)({},V),{},{myFile:a})),T(URL.createObjectURL(i.target.files[0])),f({_id:g._id,__v:g.__v,imgpath:g.imgpath,image:a,image2:g.image2,date:g.date,fname:g.fname});case 7:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),q=(0,s.useState)({myFile:""}),H=(0,o.Z)(q,2),K=H[0],M=H[1],Q=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(i){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(i.target.files[0]),n=i.target.files[0],e.next=4,b(n);case 4:a=e.sent,M((0,t.Z)((0,t.Z)({},K),{},{myFile:a}));case 6:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}();return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:{margin:"15px"},className:"nav-link",children:(0,_.jsx)(U.rU,{to:"/files",children:(0,_.jsx)(c.Z,{variant:"primary",children:"Go Back"})})}),(0,_.jsxs)("div",{className:"container mt-3",children:[(0,_.jsx)("h3",{children:"Edit Files Form"}),(0,_.jsxs)(d.Z,{className:"mt-3",children:[(0,_.jsxs)(d.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,_.jsx)(d.Z.Label,{children:"File Name"}),(0,_.jsx)(d.Z.Control,{defaultValue:null===g||void 0===g?void 0:g.fname,onChange:function(e){var i=e.target.value;k(i)},type:"text",name:"fname",placeholder:""})]}),(0,_.jsxs)("div",{className:"images-copy",children:[(0,_.jsxs)("div",{className:"element_1 green",children:[(0,_.jsx)(d.Z.Label,{children:"Image1"}),(0,_.jsx)(d.Z.Control,{type:"file",onChange:$,name:"photo",placeholder:""}),(0,_.jsx)("div",{className:"image-preview-container",children:(0,_.jsxs)(d.Z.Group,{children:[(0,_.jsx)("img",{src:O||(null===g||void 0===g?void 0:g.image),alt:"image1"}),(0,_.jsx)("div",{children:(0,_.jsx)(c.Z,{onClick:function(){f({_id:g._id,__v:g.__v,imgpath:g.imgpath,image:"",image2:g.image2,date:g.date,fname:g.fname}),T("")},children:"Delete1"})})]})})]}),(0,_.jsxs)("div",{className:"element_1 yellow",children:[(0,_.jsx)(d.Z.Label,{children:"Image2"}),(0,_.jsx)(d.Z.Control,{type:"file",onChange:Q,name:"photo",placeholder:""}),(0,_.jsx)("div",{className:"image-preview-container",children:(0,_.jsxs)(d.Z.Group,{children:[(0,_.jsx)("img",{src:K.myFile||"/uploads/".concat(null===g||void 0===g?void 0:g.imgpath),alt:"image1"}),(0,_.jsx)("div",{children:(0,_.jsx)(c.Z,{onClick:function(){f({_id:g._id,__v:g.__v,imgpath:"",image:g.image,image2:g.image2,date:g.date,fname:g.fname}),T("")},children:"Delete2"})})]})})]})]})]}),(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"image-collection-top",children:[(0,_.jsxs)("div",{className:"product-form-field",children:[(0,_.jsx)("span",{className:"d-block padding-s",children:"Image Collection"}),!x&&(0,_.jsxs)("label",{className:"red-label",htmlFor:"product-input-file-collection",children:[(0,_.jsx)("input",{hidden:!0,id:"product-input-file-collection",multiple:!0,onChange:function(e){return j(e,{name:"imageCollection",type:"multiple"})},type:"file"}),"Choose Images1"]})]}),(0,_.jsx)("div",{className:"image-collection",children:(null===h||void 0===h||null===(i=h.imageCollection)||void 0===i?void 0:i.length)>=1&&(null===h||void 0===h||null===(n=h.imageCollection)||void 0===n?void 0:n.map((function(e){return(0,_.jsxs)("div",{className:"product-form-collection-image",children:[(0,_.jsx)(N,{alt:"",src:e.url}),(0,_.jsxs)("button",{className:"product-form-delete-image",onClick:function(){return Z({id:e.id,name:"imageCollection"})},title:"Delete Image",type:"button",children:["Delete ",(0,_.jsx)("i",{className:"fa fa-times-circle"})]})]},e.id)})))})]}),(0,_.jsx)(c.Z,{variant:"primary",onClick:G,children:"Submit1"})]})]})]})}}}]);
//# sourceMappingURL=408.79f4df10.chunk.js.map